!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t){e.exports="attribute vec2 position;\nattribute vec2 normal;\n\nuniform float xLeft;\nuniform float xRight;\nuniform float yOffset;\n\nuniform float width;\nuniform float maxHeight;\n\nuniform vec2 screenSize;\n\nvoid main() {\n    float widthScreen = xRight - xLeft;\n    float heightScreen = maxHeight;\n\n    vec2 positionScreen = vec2(\n        xLeft + widthScreen * position.x,\n        yOffset + heightScreen * position.y\n    );\n\n    vec2 aspectRatioCorrection = vec2(heightScreen, widthScreen);\n    vec2 normalScreen = normalize(normal * aspectRatioCorrection) * (width / 2.0);\n    vec2 positionNdc = (positionScreen + normalScreen) / (screenSize / 2.0) - vec2(1.0, 1.0);\n\n    gl_Position = vec4(positionNdc, 0.0, 1.0);\n}\n"},function(e,t){e.exports="precision mediump float;\n\nuniform vec4 color;\n\nvoid main() {\n    gl_FragColor = vec4(0.933, 0.918, 0.906, 1.0);\n}\n"},function(e,t){e.exports="attribute vec2 position;\n\nuniform float xLeft;\nuniform float xRight;\nuniform float yOffset;\n\nuniform float maxHeight;\n\nuniform vec2 screenSize;\n\nvoid main() {\n    vec2 positionScreen = vec2(\n        xLeft + (xRight - xLeft) * position.x,\n        yOffset + maxHeight * position.y\n    );\n\n    vec2 positionNdc = positionScreen / (screenSize / 2.0) - vec2(1.0, 1.0);\n\n    gl_Position = vec4(positionNdc, 0.0, 1.0);\n}\n"},function(e,t){e.exports="precision mediump float;\n\nuniform vec4 color;\n\nvoid main() {\n    gl_FragColor = color;\n}\n"},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(1),a=n.n(o),s=n(2),l=n.n(s),f=n(3),u=n.n(f),h=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t,this.y*t)},e.prototype.perp=function(){return new e(this.y,-this.x)},e.prototype.normalize=function(){var t=this.length();return 0===t?new e(0,0):new e(this.x/t,this.y/t)},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e}(),c=function(){function e(e,t,n){for(var i=e.createBuffer(),r=e.createBuffer(),o=e.createBuffer(),a=6*(t.length-1)*2,s=new Float32Array(a),l=new Float32Array(a),f=new Float32Array(a),u=0,c=0,m=0,p=1;p<t.length;p++){var d=(p-1)/(t.length-1),y=p/(t.length-1),g=t[p-1],v=t[p],w=new h(y-d,v-g).normalize().perp();s[u++]=d,s[u++]=g,l[c++]=-w.x,l[c++]=-w.y,s[u++]=y,s[u++]=v,l[c++]=-w.x,l[c++]=-w.y,s[u++]=d,s[u++]=g,l[c++]=w.x,l[c++]=w.y,s[u++]=d,s[u++]=g,l[c++]=w.x,l[c++]=w.y,s[u++]=y,s[u++]=v,l[c++]=-w.x,l[c++]=-w.y,s[u++]=y,s[u++]=v,l[c++]=w.x,l[c++]=w.y,f[m++]=d,f[m++]=0,f[m++]=d,f[m++]=g,f[m++]=y,f[m++]=v,f[m++]=d,f[m++]=0,f[m++]=y,f[m++]=v,f[m++]=y,f[m++]=0}e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,l,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,f,e.STATIC_DRAW),this.positionBuffer=i,this.normalBuffer=r,this.areaBuffer=o,this.vertexCount=a/2,this.creationTime=n,this.gl=e}return e.prototype.dispose=function(){this.gl.deleteBuffer(this.positionBuffer),this.gl.deleteBuffer(this.normalBuffer),this.gl.deleteBuffer(this.areaBuffer)},e}(),m=.16,p=.0023,d=.65,y=512,g=.028,v=[.051,.039,.02,1],w=[.933,.918,.906,1],b=function(){function e(e,t,n,i,r){var o=e.createProgram(),a=e.createShader(e.VERTEX_SHADER);e.shaderSource(a,t),e.compileShader(a);var s=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(s,n),e.compileShader(s),e.attachShader(o,a),e.attachShader(o,s),e.linkProgram(o),this.gl=e,this.webglProgram=o,this.uniforms={};for(var l=0,f=r;l<f.length;l++){var u=f[l];this.uniforms[u.name]=new x(e,o,u.name,u.type)}this.attributes={};for(var h=0,c=i;h<c.length;h++){var m=c[h];this.attributes[m]=new S(e,o,m)}}return e.prototype.use=function(){this.gl.useProgram(this.webglProgram)},e.prototype.bindAttribute=function(e,t){this.attributes[e].bind(t)},e.prototype.bindUniform=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];(t=this.uniforms[e]).set.apply(t,n)},e}(),x=function(){function e(e,t,n,i){this.gl=e,this.type=i,this.location=e.getUniformLocation(t,n)}return e.prototype.set=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this,i=n.gl,r=n.location;switch(this.type){case"1i":i.uniform1i(r,e[0]);break;case"1f":i.uniform1f(r,e[0]);break;case"2f":i.uniform2f(r,e[0],e[1]);break;case"4f":i.uniform4f(r,e[0],e[1],e[2],e[3])}},e}(),S=function(){function e(e,t,n){this.gl=e,this.location=e.getAttribLocation(t,n)}return e.prototype.bind=function(e){var t=this.gl,n=this.location;t.bindBuffer(t.ARRAY_BUFFER,e),t.enableVertexAttribArray(n),t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0)},e}();function A(e){var t=Array.from(e).map((function(e){return Math.abs(e-128)/128})).map((function(e,t,n){return function(e,t,n){var i=t/(n-1);return e*(Math.sin(2*Math.PI*(i-.25))+1)/2}(e,t,n.length)})),n=Math.round(t.length/d),i=Math.round(n*(1-d)/2);return B(i).concat(function(e){for(var t=[],n=e.length*g/2,i=0;i<e.length;i++){for(var r=0,o=0,a=Math.ceil(i-n),s=Math.floor(i+n),l=a;l<=s;l++)l>=0&&l<e.length&&(r+=e[l],o++);t[i]=r/o}return t}(t)).concat(B(i))}function B(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}var P=function(){function e(e){var t=this;this.audioElement=e,this.sampleIndex=0,this.sampleCount=0,this.frequencyBinCount=y/2,this.lastDisplayedTime=0,fetch("/samples.dat").then((function(e){return e.arrayBuffer()})).then((function(e){t.samples=new Uint8Array(e),t.sampleCount=t.samples.length/t.frequencyBinCount}))}return e.prototype.getByteTimeDomainData=function(e){var t=this.audioElement.currentTime;if(void 0!==this.samples&&t>this.lastDisplayedTime){for(var n=this.sampleIndex*this.frequencyBinCount,i=0;i<this.frequencyBinCount;i++)e[i]=this.samples[n+i];this.sampleIndex=(this.sampleIndex+1)%this.sampleCount,this.lastDisplayedTime=t}else for(i=0;i<e.length;i++)e[i]=128},e}(),R=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},L=function(){function e(e){var t,n,i=this;this.resetSize=function(){var e=i,t=e.gl,n=e.canvas,r=e.container,o=r.clientWidth,a=r.clientHeight,s=o*window.devicePixelRatio,l=a*window.devicePixelRatio;n.width=s,n.height=l,t.viewport(0,0,s,l);var f=i.calcScopeSize(s,l),u=(s-f.x)/2;i.lineProgram.use(),i.lineProgram.bindUniform("screenSize",s,l),i.lineProgram.bindUniform("maxHeight",m*f.y),i.lineProgram.bindUniform("xLeft",u),i.lineProgram.bindUniform("xRight",s-u),i.lineProgram.bindUniform("width",f.y*p),i.areaProgram.use(),i.areaProgram.bindUniform("screenSize",s,l),i.areaProgram.bindUniform("maxHeight",m*f.y),i.areaProgram.bindUniform("xLeft",u),i.areaProgram.bindUniform("xRight",s-u),i.scopeSize=f,i.screenSize=new h(s,l)},this.renderLoop=function(){requestAnimationFrame(i.renderLoop),i.render()};var o=e.container,s=e.audio,f=e.progressBar,c=e.useAudioApiFallback;this.useAudioApiFallback=!!c,this.container=o,this.audioElement=s,this.progressBar=f,this.canvas=document.createElement("canvas"),o.appendChild(this.canvas),window.addEventListener("resize",this.resetSize);var d=this.canvas.getContext("webgl");d.clearColor(v[0],v[1],v[2],v[3]),this.gl=d,this.lines=[],this.lastLineCreationTime=0,this.lineProgram=new b(d,r.a,a.a,["position","normal"],[{name:"color",type:"4f"},{name:"screenSize",type:"2f"},{name:"width",type:"1f"},{name:"maxHeight",type:"1f"},{name:"xLeft",type:"1f"},{name:"xRight",type:"1f"},{name:"yOffset",type:"1f"}]),this.areaProgram=new b(d,l.a,u.a,["position"],[{name:"color",type:"4f"},{name:"screenSize",type:"2f"},{name:"maxHeight",type:"1f"},{name:"xLeft",type:"1f"},{name:"xRight",type:"1f"},{name:"yOffset",type:"1f"}]),this.lineProgram.use(),(t=this.lineProgram).bindUniform.apply(t,R(["color"],w)),this.areaProgram.use(),this.areaProgram.bindUniform("maxHeight",m),(n=this.areaProgram).bindUniform.apply(n,R(["color"],v)),this.canvas.style.width="100%",this.canvas.style.height="100%",this.scopeSize=new h(0,0),this.screenSize=new h(0,0),this.resetSize(),this.createInitialLines(),this.render(),this.hasStarted=!1}return e.prototype.play=function(){this.hasStarted||(this.initAudio(),this.renderLoop(),this.hasStarted=!0),this.audioElement.play()},e.prototype.pause=function(){this.audioElement.pause()},e.prototype.render=function(){var e=this.gl,t=this.lines,n=Date.now();this.updateProgressBar(),this.updateLines(),e.clear(e.COLOR_BUFFER_BIT);for(var i=(this.screenSize.y-this.scopeSize.y)/2,r=this.scopeSize.y/70,o=0;o<this.lines.length;o++){var a=t[o],s=i+(n-a.creationTime)/150*r;this.areaProgram.use(),this.areaProgram.bindAttribute("position",a.areaBuffer),this.areaProgram.bindUniform("yOffset",s),e.drawArrays(e.TRIANGLES,0,a.vertexCount),this.lineProgram.use(),this.lineProgram.bindAttribute("position",a.positionBuffer),this.lineProgram.bindAttribute("normal",a.normalBuffer),this.lineProgram.bindUniform("yOffset",s),e.drawArrays(e.TRIANGLES,0,a.vertexCount)}},e.prototype.initAudio=function(){if(void 0===this.analyser)if(this.useAudioApiFallback)this.analyser=new P(this.audioElement);else{var e=new(window.AudioContext||window.webkitAudioContext),t=e.createAnalyser();e.createMediaElementSource(this.audioElement).connect(t),t.connect(e.destination),t.fftSize=y,this.analyser=t}},e.prototype.updateProgressBar=function(){var e=this.audioElement,t=e.currentTime/e.duration;this.progressBar.style.transform="translateX("+100*-(1-t)+"%)"},e.prototype.createInitialLines=function(){for(var e=150*Math.floor(Date.now()/150),t=0;t<70;t++)this.createBlankLine(e-150*(69-t));this.lastLineCreationTime=e},e.prototype.updateLines=function(){for(;this.lines.length>70;)this.lines[0].dispose(),this.lines.shift();var e=150*Math.floor(Date.now()/150);if(e>this.lastLineCreationTime){for(var t=Math.round((e-this.lastLineCreationTime)/150)-1,n=0;n<t;n++)this.createBlankLine(this.lastLineCreationTime+150*(n+1));this.createLine(e),this.lastLineCreationTime=e}},e.prototype.createLine=function(e){if(void 0!==this.analyser){var t=new Uint8Array(this.analyser.frequencyBinCount);this.analyser.getByteTimeDomainData(t),this.lines.push(new c(this.gl,A(t),e))}else this.createBlankLine(e)},e.prototype.createBlankLine=function(e){this.lines.push(new c(this.gl,B(2),e))},e.prototype.calcScopeSize=function(e,t){var n=e-.1*e,i=t-.1*t;return n<.8125*i?new h(n,Math.round(n/.8125)):new h(Math.round(.8125*i),i)},e}(),C="\nI've been waiting for a guide to come and take me by the hand,\nCould these sensations make me feel the pleasures of a normal man?\nThese sensations barely interest me for another day,\nI've got the spirit, lose the feeling, take the shock away.\n\nIt's getting faster, moving faster now, it's getting out of hand,\nOn the tenth floor, down the back stairs, it's a no man's land,\nLights are flashing, cars are crashing, getting frequent now,\nI've got the spirit, lose the feeling, let it out somehow.\n\nWhat means to you, what means to me, and we will meet again,\nI'm watching you, I'm watching her, I'll take no pity from you friends,\nWho is right, who can tell, and who gives a damn right now,\nUntil the spirit new sensation takes hold, then you know,\nUntil the spirit new sensation takes hold, then you know,\nUntil the spirit new sensation takes hold, then you know,\nI've got the spirit, but lose the feeling,\nI've got the spirit, but lose the feeling,\nFeeling, feeling, feeling, feeling, feeling, feeling, feeling.\n";function T(){var e=function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if(null!==e)return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||"0",10)]}}();return void 0!==e&&(13===e[0]&&e[1]>=2)}!function(){try{return"WebGLRenderingContext"in window&&!!document.createElement("canvas").getContext("webgl",{failIfMajorPerformanceCaveat:!0})&&!(!window.AudioContext&&!window.webkitAudioContext)}catch(e){return!1}}()?document.getElementById("no-webgl").style.display="table":function(){var e=!1,t=!0,n=new L({container:document.querySelector(".display"),audio:document.querySelector(".audio"),progressBar:document.querySelector(".progress-bar"),useAudioApiFallback:T()});window.scope=n;var i=document.querySelector(".start-overlay"),r=document.querySelector(".play-overlay"),o=document.querySelector(".pause-overlay"),a=document.querySelector(".home-link");function s(e){e.style.transition="none",e.style.opacity="0.9",e.style.transform="scale(1)",setTimeout((function(){e.style.transition="opacity 750ms, transform 750ms",e.style.opacity="0",e.style.transform="scale(1.5)"}),0)}i.style.visibility="visible",a.addEventListener("click",(function(e){e.stopPropagation()})),document.body.addEventListener("click",(function(){e?(n.pause(),s(o),e=!1):(n.play(),t?(t=!1,i.style.opacity="0",setTimeout((function(){return i.style.display="none"}),300)):s(r),e=!0)})),console.log(C)}()}]);